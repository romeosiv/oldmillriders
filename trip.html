<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Trips - Old Mill Riders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="./moulin-coeur-noir.png" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { font-family: 'Space Grotesk', sans-serif; background: #e5e5e5; margin: 0; color: #000; }
    .container { max-width: 1024px; margin: 0 auto; padding: 0 1rem; }

    /* Wrapper for three cards */
    .rv-cards-wrapper {
      display: flex;
      gap: 1rem;
      justify-content: space-between;
      flex-wrap: wrap;
      margin: 2rem 0;
    }
    .rv-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      flex: 1 1 calc((100% - 2rem) / 3);
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    /* Autres styles inchangés... */
  </style>
</head>
<body>
  <div class="container">
    <!-- Trois cartes côte à côte -->
    <div class="rv-cards-wrapper">
      <!-- Carte 1 -->
      <article class="rv-card" id="trip-01">
        <!-- Contenu identique à Balade en Chartreuse -->
        <div class="rv-card-header">
          <span class="rv-card-id">01</span>
          <div class="rv-card-badges">
            <img src="montage.png" alt="Montagne" class="badge-icon">
            <img src="forest.png"  alt="Forêt"    class="badge-icon">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="IMG_9375.JPEG" alt="Balade en Chartreuse">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Balade en Chartreuse</h3>
            <span class="rv-card-rating">★★★★☆</span>
          </div>
          <p class="rv-card-text">Une virée de 3 jours au cœur du massif de la Chartreuse, entre forêts humides, cols étroits et nuits sous tente.</p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>350 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>2 100 m</strong></div>
              <div class="stat"><small>Durée</small><strong>3 jours</strong></div>
              <div class="stat"><small>Niveau</small><strong>Intermédiaire</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="roadbook-chartreusealpes.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>

      <!-- Carte 2 -->
      <article class="rv-card" id="trip-02">
        <!-- Copie exacte de la carte 1 -->
        <div class="rv-card-header"><span class="rv-card-id">02</span><div class="rv-card-badges"><img src="montage.png" alt="Montagne" class="badge-icon"><img src="forest.png" alt="Forêt" class="badge-icon"></div></div>
        <div class="rv-card-media"><img src="IMG_9375.JPEG" alt="Balade en Chartreuse"></div>
        <div class="rv-card-body"><div class="rv-card-title-row"><h3 class="rv-card-title">Balade en Chartreuse</h3><span class="rv-card-rating">★★★★☆</span></div><p class="rv-card-text">Une virée de 3 jours au cœur du massif de la Chartreuse, entre forêts humides, cols étroits et nuits sous tente.</p><div class="rv-card-meta"><div class="rv-card-stats"><div class="stat"><small>Distance</small><strong>350 km</strong></div><div class="stat"><small>Altitude max ↑</small><strong>2 100 m</strong></div><div class="stat"><small>Durée</small><strong>3 jours</strong></div><div class="stat"><small>Niveau</small><strong>Intermédiaire</strong></div></div></div><div class="rv-card-footer"><a href="roadbook-chartreusealpes.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a></div></div>
      </article>

      <!-- Carte 3 -->
      <article class="rv-card" id="trip-03">
        <!-- Copie exacte de la carte 1 -->
        <div class="rv-card-header"><span class="rv-card-id">03</span><div class="rv-card-badges"><img src="montage.png" alt="Montagne" class="badge-icon"><img src="forest.png" alt="Forêt" class="badge-icon"></div></div>
        <div class="rv-card-media"><img src="IMG_9375.JPEG" alt="Balade en Chartreuse"></div>
        <div class="rv-card-body"><div class="rv-card-title-row"><h3 class="rv-card-title">Balade en Chartreuse</h3><span class="rv-card-rating">★★★★☆</span></div><p class="rv-card-text">Une virée de 3 jours au cœur du massif de la Chartreuse, entre forêts humides, cols étroits et nuits sous tente.</p><div class="rv-card-meta"><div class="rv-card-stats"><div class="stat"><small>Distance</small><strong>350 km</strong></div><div class="stat"><small>Altitude max ↑</small><strong>2 100 m</strong></div><div class="stat"><small>Durée</small><strong>3 jours</strong></div><div class="stat"><small>Niveau</small><strong>Intermédiaire</strong></div></div></div><div class="rv-card-footer"><a href="roadbook-chartreusealpes.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a></div></div>
      </article>
    </div>

        <!-- MODAL TRIP -->
    <div id="trip-modal" class="modal">
      <div class="modal-content">
        <span class="modal-close">&times;</span>
        <div id="map-modal"></div>
        <div class="rv-card" style="box-shadow:none; max-width:none; margin:0;">
          <div class="rv-card-header">
            <span class="rv-card-id">01</span>
            <div class="rv-card-badges">
              <img src="montage.png" alt="Montagne" class="badge-icon">
              <img src="forest.png"  alt="Forêt"    class="badge-icon">
            </div>
          </div>
          <div class="rv-card-body">
            <div class="rv-card-title-row">
              <h3 class="rv-card-title">Balade en Chartreuse</h3>
              <span class="rv-card-rating">★★★★☆</span>
            </div>
            <p class="rv-card-text">
              Une virée de 3 jours au cœur du massif de la Chartreuse, entre forêts humides, cols étroits et nuits sous tente.
            </p>
            <div class="rv-card-meta">
              <div class="rv-card-stats">
                <div class="stat">
                  <small>Distance</small>
                  <strong>350 km</strong>
                </div>
                <div class="stat">
                  <small>Altitude max ↑</small>
                  <strong>2 100 m</strong>
                </div>
                <div class="stat">
                  <small>Durée</small>
                  <strong>3 jours</strong>
                </div>
                <div class="stat">
                  <small>Niveau</small>
                  <strong>Intermédiaire</strong>
                </div>
              </div>
            </div>
            <div class="rv-card-footer">
              <a href="roadbook-chartreusealpes.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
            </div>
          </div>
        </div>

        <div class="trip-gallery-modal">
          <h4>Galerie</h4>
          <div class="gallery-thumbs">
            <img src="IMG_9380.JPEG" alt="Photo 1">
            <img src="IMG_9384.JPEG" alt="Photo 2">
            <img src="IMG_9385.JPEG" alt="Photo 3">
            <img src="IMG_9387.JPEG" alt="Photo 4">
            <img src="IMG_9392.JPEG" alt="Photo 5">
            <img src="IMG_9393.JPEG" alt="Photo 6">
            <img src="IMG_9416.JPEG" alt="Photo 7">
            <img src="IMG_9423.JPEG" alt="Photo 8">
            <img src="IMG_9425.JPEG" alt="Photo 9">
            <img src="IMG_7860.JPEG" alt="Photo 10">
            <img src="IMG_9375.JPEG" alt="Photo 11">
          </div>
        </div>
      </div>
    </div>

    <!-- LIGHTBOX MODAL IMAGE -->
    <div id="image-modal" class="modal">
      <div class="modal-content image-lightbox">
        <button class="lightbox-prev" aria-label="Image précédente">‹</button>
        <img id="image-modal-img" class="image-modal-img" src="" alt="Aperçu">
        <button class="lightbox-next" aria-label="Image suivante">›</button>
        <span class="modal-close">&times;</span>
      </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">
      <div class="left-footer">
        <a href="home.html" style="display:flex; align-items:center; gap:.5rem;">
          <img src="./moulin-coeur-noir.png" alt="Logo">
          <span>Old Mill Riders</span>
        </a>
      </div>
      <div class="right-footer">
        <a href="labande.html">La Bande</a>
        <a href="LeShop.html">Le Shop</a>
        <a href="#" id="privacy-policy-link">Politique de confidentialité</a>
        <a href="#" id="legal-mentions-link">Mentions légales</a>
      </div>
    </div>

    <!-- MODALS Politique & Mentions légales -->
    <div id="privacy-modal" class="modal">
      <div class="modal-content"><span class="modal-close">&times;</span><!-- contenu… --></div>
    </div>
    <div id="legal-modal" class="modal">
      <div class="modal-content"><span class="modal-close">&times;</span><!-- contenu… --></div>
    </div>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // menu burger
      document.querySelector('.menu-toggle')
        .addEventListener('click', () =>
          document.querySelector('header nav').classList.toggle('open')
        );

      // modals politique & mentions
      document.getElementById('privacy-policy-link')
        .addEventListener('click', e => {
          e.preventDefault();
          document.getElementById('privacy-modal').style.display = 'flex';
        });
      document.getElementById('legal-mentions-link')
        .addEventListener('click', e => {
          e.preventDefault();
          document.getElementById('legal-modal').style.display = 'flex';
        });

      // fermer tous les modals
      document.querySelectorAll('.modal-close').forEach(btn =>
        btn.addEventListener('click', () =>
          btn.closest('.modal').style.display = 'none'
        )
      );
      window.addEventListener('click', e => {
        if (e.target.classList.contains('modal')) {
          e.target.style.display = 'none';
        }
      });
    });

    // carte + GPX
    const card      = document.getElementById('trip-01');
    const tripModal = document.getElementById('trip-modal');
    let mapInit     = false;

    card.addEventListener('click', () => {
      tripModal.style.display = 'flex';
      if (!mapInit) {
        const map = L.map('map-modal').setView([45.3639, 5.83], 10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        new L.GPX('roadbook-chartreusealpes.gpx', {
          async: true,
          marker_options: { startIconUrl: null, endIconUrl: null },
          polyline_options: { color: '#0077cc', weight: 4, opacity: 0.8 }
        })
        .on('loaded', e => map.fitBounds(e.target.getBounds()))
        .addTo(map);

        mapInit = true;
      }
    });

    // galerie + lightbox carrousel + swipe
    const thumbs        = Array.from(document.querySelectorAll('.gallery-thumbs img'));
    const imageModal    = document.getElementById('image-modal');
    const imageModalImg = document.getElementById('image-modal-img');
    const prevBtn       = document.querySelector('.lightbox-prev');
    const nextBtn       = document.querySelector('.lightbox-next');
    let currentImgIndex = 0;

    thumbs.forEach((img, idx) => {
      img.addEventListener('click', () => {
        currentImgIndex = idx;
        imageModalImg.src = img.src;
        imageModal.style.display = 'flex';
      });
    });
    prevBtn.addEventListener('click', e => {
      e.stopPropagation();
      currentImgIndex = (currentImgIndex - 1 + thumbs.length) % thumbs.length;
      imageModalImg.src = thumbs[currentImgIndex].src;
    });
    nextBtn.addEventListener('click', e => {
      e.stopPropagation();
      currentImgIndex = (currentImgIndex + 1) % thumbs.length;
      imageModalImg.src = thumbs[currentImgIndex].src;
    });
    // swipe tactile
    let startX = 0;
    imageModalImg.addEventListener('touchstart', e => {
      startX = e.changedTouches[0].screenX;
    });
    imageModalImg.addEventListener('touchend', e => {
      const diff = e.changedTouches[0].screenX - startX;
      if (diff > 50) prevBtn.click();
      if (diff < -50) nextBtn.click();
    });
  </script>
</body>
</html>
  </div>
</body>
</html>
