<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Trips - Old Mill Riders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="./moulin-coeur-noir.png" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.5.0/gpx.min.js"></script>
  <style>
    /* ---------- Reset & Base ---------- */
    body { font-family:'Space Grotesk',sans-serif; background:#e5e5e5; margin:0; color:#000; }
    .container { max-width:1024px; margin:0 auto; padding:0 1rem; }

    /* ---------- HEADER ---------- */
    header { background:#000; color:#fff; border-radius:20px; padding:1rem 2rem;
      display:flex; align-items:center; justify-content:space-between;
      position:relative; margin:20px auto; max-width:1024px; box-sizing:border-box;
    }
    .left-nav,.right-nav { display:flex; align-items:center; gap:1.5rem; }
    .center-title { position:absolute; left:50%; transform:translateX(-50%);
      font-size:1.8rem; font-weight:bold; white-space:nowrap;
    }
    .center-title a,.center-title a:visited { color:inherit; text-decoration:none; }
    nav { display:flex; align-items:center; gap:1rem; }
    nav a { position:relative; color:#fff; text-decoration:none; font-size:1rem; }
    nav a::after { content:""; position:absolute; left:0; bottom:-2px;
      width:0; height:1px; background:#fff; transition:width .3s ease;
    }
    nav a:hover::after, nav a.active::after { width:100%; }
    .menu-toggle { display:none; background:none; border:none;
      font-size:1.5rem; color:#fff; cursor:pointer;
    }
    .icon { width:28px; height:28px; }
    .insta-icon { width:16px; display:block; }

    /* ---------- HERO ---------- */
    .hero {
      background-image:image-set(
        url('./trips-desktop.jpg') 1x,
        url('./trips-desktop@2x.jpg') 2x
      );
      background-size:cover; background-position:center;
      filter:grayscale(100%); border-radius:20px;
      margin:0 auto 20px; max-width:1024px; aspect-ratio:1024/350;
      position:relative;
    }
    @media (max-width:768px) {
      .hero {
        background-image:image-set(
          url('./trips-mobile.jpg') 1x,
          url('./trips-mobile@2x.jpg') 2x
        );
      }
    }
    .hero-text {
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%); color:#fff;
      font-size:2.5rem; text-align:center;
      text-shadow:0 0 8px rgba(0,0,0,0.7);
    }

    /* ---------- ABOUT BLOCK ---------- */
    .about-block {
      background:#000; color:#fff; padding:2rem;
      border-radius:20px; margin:20px auto;
      text-align:center; font-size:1rem; line-height:1.5;
      box-sizing:border-box;
    }

    /* ---------- TRIPS WRAPPER ---------- */
      .rv-cards-wrapper {
        display: grid;
        /* autant de colonnes que possible, chacune au moins 300 px de large : */
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
      }

    /* ---------- TRIP CARD ---------- */
.rv-card {
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);

  /* *injection* de tes réglages Grid */
  width: auto;
  flex: none;

  /* transition sur le scale pour un hover fluide */
  will-change: transform;
  transition: transform 0.3s ease;
}

.rv-card:hover {
  transform: scale(1.02);
}
    .rv-card-header {
      display:flex; justify-content:space-between;
      padding:.5rem 1rem; background:#f5f5f5; align-items:center;
    }
    .rv-card-id { font-weight:bold; font-size:1.25rem; }
    .badge-icon { width:24px; height:24px; object-fit:contain; margin-left:.5rem; }
    .rv-card-media img { width:100%; display:block; }
    .rv-card-body { padding:1rem; }
    .rv-card-title-row {
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom:.5rem;
    }
    .rv-card-title { font-size:1.1rem; margin:0; }
    .rv-card-rating { font-size:.9rem; }
    .rv-card-text {
      margin:0 0 1rem; font-size:.9rem; color:#444;
    }
    .rv-cards-wrapper .rv-card-text {
      display:-webkit-box; -webkit-box-orient:vertical;
      -webkit-line-clamp:2; overflow:hidden;
    }

    /* ---------- MÉTA & STATS ---------- */
    .rv-card-meta { display:flex; gap:1rem; margin-bottom:1rem; }
    .rv-card-stats {
      display:grid; grid-template-columns:repeat(2,auto);
      gap:.75rem 1.5rem;
    }
    .rv-card-stats .stat small {
      display:block; font-size:.75rem; color:#666;
      text-transform:uppercase; letter-spacing:.5px;
      margin-bottom:.25rem;
    }
    .rv-card-stats .stat strong {
      display:block; font-size:.95rem; color:#000;
    }
    .rv-card-footer {
      display:flex; align-items:center; justify-content:space-between;
      padding:0 1rem 1rem;
    }
    .rv-card-link {
      font-size:.85rem; text-decoration:none; color:#0077cc;
    }
    .rv-card-link:hover { text-decoration:underline; }

    /* ---------- MODAL TRIP ---------- */
    .modal {
      display:none; position:fixed; top:0; left:0;
      width:100%; height:100%; background:rgba(0,0,0,0.5);
      justify-content:center; align-items:center;
      padding:1rem; box-sizing:border-box; z-index:1000;
    }
    .modal-content {
      background:#fff; border-radius:12px;
      max-width:600px; width:100%; padding:1.5rem;
      position:relative; max-height:90vh; overflow-y:auto;
    }
    #trip-modal .rv-card-text {
      display:block; overflow:visible;
      -webkit-line-clamp:unset; -webkit-box-orient:initial;
    }
    #trip-modal .rv-card-media { display:none; }
    #map-modal { height:300px; border-radius:12px; margin-bottom:1rem; }
    #trip-modal-card .rv-card {
      width:100%; margin:0; box-shadow:none;
      transform:none!important; cursor:default;
    }

    /* ---------- GALERIE ---------- */
    .trip-gallery-modal { margin-top:1.5rem; }
    .trip-gallery-modal h4 {
      margin:0 0 .5rem; font-size:1rem; font-weight:bold;
    }
    .gallery-thumbs {
      display:flex; flex-wrap:wrap; gap:8px;
    }
    .gallery-thumbs img {
      width:70px; height:70px; object-fit:cover;
      border-radius:6px; cursor:pointer; border:none; box-shadow:none;
    }
    .gallery-thumbs .thumb-video {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 6px;
      cursor: pointer;
    }

    /* ---------- LIGHTBOX ---------- */
    #image-modal .modal-content {
      background:transparent; padding:0; box-shadow:none;
      display:flex; justify-content:center; align-items:center;
    }
    .image-lightbox {
      position:relative; display:flex; align-items:center; justify-content:center;
    }
    .image-modal-img {
      max-width:90vw; max-height:90vh; width:auto; height:auto;
    }
    .lightbox-prev,.lightbox-next {
      position:absolute; top:50%; transform:translateY(-50%);
      background:rgba(255,255,255,0.8); border:none;
      font-size:2rem; padding:.2rem .6rem; cursor:pointer;
      border-radius:4px; user-select:none;
    }
    .lightbox-prev { left:1rem; } .lightbox-next { right:1rem; }
    .lightbox-prev:hover,.lightbox-next:hover { background:#fff; }
    
    /* Empêche le conteneur lightbox de déborder de l'écran */
#image-modal .modal-content {
  max-width: 90vw;
  max-height: 90vh;
  overflow: hidden;
  padding: 0;
}

/* Redimensionne l'image/vidéo dans la lightbox pour qu'elle rentre toujours */
#image-modal .image-modal-img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}

    /* ---------- FOOTER ---------- */
    .footer {
      background:#e5e5e5; color:#000; padding:20px 0;
      display:flex; align-items:center; justify-content:flex-start;
      border-radius:20px; max-width:1024px; margin:3rem auto 0;
      box-sizing:border-box; flex-wrap:wrap;
    }
    .footer .left-footer {
      display:flex; align-items:center; gap:1rem; margin-left:1rem;
    }
    .footer .left-footer img { width:28px; height:28px; }
    .footer .left-footer a,.footer .left-footer a:visited {
      color:#000; text-decoration:none;
    }
    .footer .right-footer {
      display:flex; gap:1.5rem; margin-left:auto; margin-right:1rem;
    }
    .footer .right-footer a {
      text-decoration:none; font-weight:normal;
      color:#000; font-size:1rem; cursor:pointer;
    }

    /* ---------- RESPONSIVE ---------- */
    @media(max-width:768px){
      header{padding:.5rem 1rem;}
      .center-title{position:static!important;transform:none!important;
        font-size:1.4rem!important;text-align:center!important;
        width:100%!important;margin:0 auto!important;
      }
      .left-nav a.logo{display:none;}
      .menu-toggle{display:block;}
      nav{display:none;flex-direction:column;gap:1rem;
        position:absolute;top:100%;left:0;right:0;
        padding:1rem;background:#000;border-radius:20px;z-index:10;
      }
      nav.open{display:flex;}
      .hero{margin-bottom:1rem;}
      .about-block{margin:1rem auto;}
      .rv-cards-wrapper{margin:1rem 0;gap:.75rem;}
      .rv-card{width:100%;margin:.5rem 0;}
      .gallery-thumbs img{width:60px;height:60px;}
      .gallery-thumbs .thumb-video {
      width: 60px;
      height: 60px;
        }
      .lightbox-prev,.lightbox-next{display:none;}
      .footer{flex-direction:column;align-items:center;padding:10px 1rem;}
      .footer .left-footer,.footer .right-footer{
        width:100%;display:flex;justify-content:center;margin:.25rem 0;
      }
      .footer .right-footer{flex-wrap:wrap;gap:.5rem;}
      .footer .right-footer a{font-size:.75rem;white-space:nowrap;}
      .footer .left-footer img{width:20px;height:20px;}
    }
    /* ===== Limiter la taille de la vidéo dans la lightbox ===== */
#image-modal .modal-content {
  /* on empêche le contenu de déborder */
  max-height: 80vh;
  overflow: hidden;
}
#image-modal .image-modal-img {
  /* s’assure que la vidéo/ l’image rentre dans 90% de la fenêtre */
  max-width: 90vw;
  max-height: 80vh;
  object-fit: contain;
}
    .filters-chips {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin: 1.5rem 0;
}
.filter-group {
  display: flex;
  align-items: center;
  gap: .5rem;
}
/* 2) Style de base des chips */
.chip {
  padding: .4rem .8rem;
  border: 1px solid #000;
  border-radius: 16px;
  background: #fff;
  color: #000;
  cursor: pointer;
  font-size: .9rem;
  transition: 
    background 0.2s ease, 
    color 0.2s ease,
    transform 0.2s ease;   /* <-- ajoute transition sur la taille */
    /* === Optimisation tactile === */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
}

/* 3) État sélectionné */
.chip.selected {
  background: #000;
  color: #fff;
}

    @media (hover: hover) {
  .chip:hover {
    transform: scale(1.1);
    background: #000;
    color: #fff;
  }
}
/* ========== FILTRES REPLIABLES ========== */
.filters-wrapper {
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
  margin: 20px auto;
  max-width: 1024px;
  overflow: hidden;
}

/* Bouton d’ouverture */
.filters-toggle {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 1.05rem;
  background: #f5f5f5;
  border: none;
  cursor: pointer;
  color: #000 !important;
    -webkit-appearance: none;
  appearance: none;
}
.filters-toggle .arrow {
  transition: transform 0.2s ease;
}

/* Contenu masqué par défaut */
.filters-content {
  display: none;
}
/* Quand on ouvre */
.filters-wrapper.open .filters-content {
  display: block;
}
.filters-wrapper.open .filters-toggle .arrow {
  transform: rotate(180deg);
}

/* Chips container */
.filters-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  padding-top:    0.12rem;  /* avant tu n’en avais pas, tu peux diminuer cette valeur à 0.25rem, 0… */
  padding-bottom: 0.12rem;  /* ou utilise margin-bottom si tu préfères */
}
    
/* Chaque groupe (label + boutons) */
.filter-group {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.filter-group > span {
  min-width: 6ch;
  font-size: 0.9rem;
  font-weight: bold;
}

/* Responsive mobile : colonnes */
@media (max-width: 768px) {
  .filters-chips {
    flex-direction: column;
    padding: 1rem;
    gap: 1rem;
    margin-top: 0.25rem;   /* espace au-dessus des chips */
    margin-bottom: 0.25rem;/* espace en-dessous */
        justify-content: flex-start !important;
    align-items: flex-start;
  }
  }
}

  </style>
</head>
<body>
  <div class="container">

    <!-- HEADER -->
    <header>
      <div class="left-nav">
        <a href="home.html" class="logo"><img src="./moulin-coeur-blanc.png" class="icon" alt="Logo"></a>
        <button class="menu-toggle" aria-label="Menu">☰</button>
        <nav>
          <a href="labande.html">La Bande</a>
          <a href="LeShop.html">Le Shop</a>
          <a href="trip.html" class="active">Trips</a>
        </nav>
      </div>
      <div class="center-title"><a href="home.html">Old Mill Riders</a></div>
      <div class="right-nav">
        <a href="https://www.instagram.com/old_mill_riders/" target="_blank">
          <img src="https://img.icons8.com/ios-filled/50/ffffff/instagram-new.png" class="insta-icon" alt="Instagram">
        </a>
      </div>
    </header>

    <!-- HERO -->
    <div class="hero"><div class="hero-text">Viens, on part</div></div>

    <!-- ABOUT BLOCK -->
    <div class="about-block">
      Prépare ta moto et on prend la route !<br>
      Pas besoin de grand chose : la tente, deux trois outils et ce qu'il faut d'affaire. <br>
      Des cols sinueux, des forêts verdoyantes, des rivières tumultueuses…<br>
      tout l’esprit Old Mill Riders dans des trips inoubliables !
    </div>
    
<!-- FILTRES CHIPS -->
<div class="filters-wrapper">
    <button type="button" id="filters-toggle" class="filters-toggle">
    Filtres <span class="arrow">▼</span>
        </button>
   <div id="filters-content" class="filters-content">
        <div class="filters-chips">
  <!-- catégories -->
  <div class="filter-group">
    <span>Type :</span>
    <button type="button" class="chip" data-filter-type="category" data-value="eau">Eau</button>
    <button type="button" class="chip" data-filter-type="category" data-value="foret">Forêt</button>
    <button type="button" class="chip" data-filter-type="category" data-value="montagne">Montagne</button>
  </div>
  <!-- distance -->
  <div class="filter-group">
    <span>Distance :</span>
    <button type="button" class="chip" data-filter-type="distance" data-value="0-150">0–150 km</button>
    <button type="button" class="chip" data-filter-type="distance" data-value="150-300">150–300 km</button>
    <button type="button" class="chip" data-filter-type="distance" data-value="300+">> 300 km</button>
  </div>
  <!-- durée -->
  <div class="filter-group">
    <span>Durée :</span>
    <button type="button" class="chip" data-filter-type="duration" data-value="0.5">½ jour</button>
    <button type="button" class="chip" data-filter-type="duration" data-value="1">1 jour</button>
    <button type="button" class="chip" data-filter-type="duration" data-value="2+">≥ 2 jours</button>
  </div>
   <!-- Surface -->
  <div class="filter-group">
  <span>Surface :</span>
  <button type="button" class="chip" data-filter-type="surface" data-value="route">Route</button>
  <button type="button" class="chip" data-filter-type="surface" data-value="offroad">Offroad</button>
</div>
</div>  
</div>
</div>

    <!-- CARTES -->
    <div class="rv-cards-wrapper">
      <!-- Carte 01 -->
      <article class="rv-card"
               id="trip-01"
               data-gpx="roadbook-chartreusealpes.gpx"
               data-images="IMG_9380.JPEG,IMG_9384.JPEG,IMG_9385.JPEG,IMG_9387.JPEG,IMG_9392.JPEG,IMG_9393.JPEG,IMG_9416.JPEG,IMG_9423.JPEG,IMG_9425.JPEG,IMG_7860.JPEG,IMG_9375.JPEG"
               data-categories="foret,montagne"
               data-distance="504"
               data-duration="2"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">01</span>
          <div class="rv-card-badges">
            <img src="forest.png" class="badge-icon" alt="Forêt">
            <img src="montage.png" class="badge-icon" alt="Montagne">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="IMG_9380.JPEG" alt="Entre Chartreuse et massif des Grandes Rousses">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Entre Chartreuse et massif des Grandes Rousses</h3>
            <span class="rv-card-rating">★★★☆</span>
          </div>
          <p class="rv-card-text">
            Une virée de 2 jours au cœur du massif de la Chartreuse puis des Grandes Rousses. Entre forêts humides et cols étroits. On traverse d'abord la Chartreuse pour arriver en fin de journée à Chamrousse.
            Le lendemain on pousse jusqu'à l'Alpe d'Huez et ses mythiques lacets pour ensuite revenir sur Grenoble et profiter d'un bon restaurant. Puis retour tranquille sur Lyon, des paysages pleins la tête.
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>504 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>1 854 m</strong></div>
              <div class="stat"><small>Durée</small><strong>2 jours</strong></div>
              <div class="stat"><small>Niveau</small><strong>Débutant</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="roadbook-chartreusealpes.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>

      <!-- Carte 02 -->
      <article class="rv-card"
               id="trip-02"
               data-gpx="j1-rdga-thonon-les-bains-beaufort.gpx"
               data-images="rdgaj1.JPEG,j1rdga1.JPEG,j1rdga2.JPEG,j1rdga3.JPEG,j1rdga4.JPEG"
               data-categories="montagne, eau"
               data-distance="145"
               data-duration="0.5"
              data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">02</span>
          <div class="rv-card-badges">
            <img src="mer.png" class="badge-icon" alt="Mer">
            <img src="montage.png" class="badge-icon" alt="Montagne">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="rdgaj1.JPEG" alt="RDGA Jour 1 – De Thonon à Beaufort">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">RDGA Jour 1 – De Thonon à Beaufort</h3>
            <span class="rv-card-rating">★★★★</span>
          </div>
          <p class="rv-card-text">
          Premier tronçon de la Route des Grandes Alpes. Entre Thonon et Beaufort. Après avoir roulé jusqu'à Thonon depuis Lyon, petit ravitaillement avant de repartir. On suit la Dranse jusqu'à Morzine avant d'attaquer quelques kilomètres puis loin le premier col, le col de la Colombière. Suivront ensuite La Croix de Fer, et le col des Saisies et Beaufort.          </p>          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>145 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>1 659 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1/2 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Intermédiaire</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="j1-rdga-thonon-les-bains-beaufort.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>

      <!-- Carte 03 -->
      <article class="rv-card"
               id="trip-03"
               data-gpx="j2-rdga-beaufort-briancon.gpx"
               data-images="j2rdga1.JPEG,j2rdga2.JPEG,j2rdga3.JPEG,j2rdga4.JPEG,j2rdga5.JPEG,j2rdga6.JPEG,j2rdga7.JPEG,j2rdga8.JPEG,j2rdga9.JPEG,j2rdga10.JPEG,j2rdga11.JPEG,j2rdga12.JPEG,j2rdga13.JPEG"
               data-categories="montagne"
               data-distance="493"
               data-duration="1"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">03</span>
          <div class="rv-card-badges">
            <img src="montage.png" class="badge-icon" alt="Montagne">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="j2rdga8.JPEG" alt="RDGA Jour 2 – De Beaufort à Briançon">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">RDGA Jour 2 – De Beaufort à Briançon</h3>
            <span class="rv-card-rating">★★★★</span>
          </div>
          <p class="rv-card-text">
          De Deuxième journée sur la route des Grandes Alpes. On monte en altitude, pensez à vous couvrir ! Un arret au lac de Roseland, puis direction le col du Saint Bernard et le col de l'Iseran. 
          Ensuite ca grimpe direction le Galibier puis le Lautaret. On en prend pleins les yeux... Redescente vers Briançon ensuite. Pour dormir, je vous conseille la Vallée de la Clarée. Et le soir une petite tartiflette dans la vieille ville de Briançon !
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>493 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>2 753 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Confirmé</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="j2-rdga-beaufort-briancon.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>

      <!-- Cartes 04 -->
      <article class="rv-card"
               id="trip-04"
               data-gpx="j3-rdga-briancon-jausiers.gpx"
               data-images="j3rdga1.JPEG,j3rdga2.JPEG,j3rdga3.JPEG,j3rdga4.JPEG,j3rdga5.JPEG,j3rdga6.JPEG,j3rdga7.JPEG,j3rdga8.JPEG,j3rdga9.JPEG,j3rdga10.JPG"               
               data-categories="montagne"
               data-distance="230"
               data-duration="1"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">04</span>
          <div class="rv-card-badges">
            <img src="mer.png" class="badge-icon" alt="Mer">
            <img src="montage.png" class="badge-icon" alt="Montagne">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="j3rdga5.JPEG" alt="RDGA Jour 3 – De Briançon à Jausier">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">RDGA Jour 3 – De Briançon à Jausier</h3>
            <span class="rv-card-rating">★★★★</span>
          </div>
          <p class="rv-card-text">
            Troisième journée sur la Route des Grandes Alpes. Un col mythique et des pyasages lunaires: le col de l'Izoard. On a ensuite la très belle route de Ceilac qui mérite un allé retour.
            Enfin le col de Vars. Poussez jusqu'à Barcelonette. L'été la place du centre ville est plutôt animé,et en septembre à lieu le mythique Trail adventure motofestival.
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>230 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>2 364 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Intermédiaire</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="j3-rdga-briancon-jausiers.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>
            <!-- Cartes 05 -->
      <article class="rv-card"
               id="trip-05"
               data-gpx="auvergnepddcantal.gpx"
               data-images="auv1.JPEG,auv2.JPEG,auv3.JPEG,auv4.JPEG,auv5.JPEG,auv6.jpg,auv7.JPEG,auv8.jpg,auv9.jpg,auv10.jpg,video:auvergne.mp4"
               data-categories="montagne"
               data-distance="298"
               data-duration="1"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">05</span>
          <div class="rv-card-badges">
            <img src="montage.png" class="badge-icon" alt="Montagne">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="auv2.JPEG" alt="Volcans d'Auvergne - Puy de dôme et Cantal">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Volcans d'Auvergne - Puy de dôme et Cantal</h3>
            <span class="rv-card-rating">★★★★</span>
          </div>
          <p class="rv-card-text">
            À l'occasion du ACES Experience, on a fait la boucle historique. Près de 300km entre Puy de dôme et le Cantal. Entre lac, volcans, et plaines immenses. Arretez vous pour déguster une bonne truffade à Murat ! Veillez à bien visser vos disques quand vous reprendrez la route (comprendra qui pourra !). Un arrêt de rigueur au Puy Mary pour ensuite redescendre sur Salers.
            Ensuite on s'est un peu perdu sur le retour ! On vous epargne ça, vous trouverez ici la boucle complète.
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>298 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>1 569 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Confirmé</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="auvergnepddcantal.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>
                 <!-- Cartes 06 -->
      <article class="rv-card"
               id="trip-06"
               data-gpx="moireLe BoisdOingt.gpx"
               data-images="trail1.JPEG,trail2.JPEG,trail3.JPEG,trail4.JPEG,trail5.JPEG,trail6.JPEG"
               data-categories="foret"
               data-distance="120"
               data-duration="0.5"
               data-surface="offroad">
        <div class="rv-card-header">
          <span class="rv-card-id">06</span>
          <div class="rv-card-badges">
            <img src="forest.png" class="badge-icon" alt="Forêt">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="trail3.JPEG" alt="Trail offraod en Beaujolais">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Trail offraod en Beaujolais</h3>
            <span class="rv-card-rating">★★★☆</span>
          </div>
          <p class="rv-card-text">
            On sort les anciennes à crampon sur ce tracé offroad ! Itinéraire en Beaujolais, entre vignes, collines et bois.. Un bel itinéraire qui sent bon la liberté ! Attention certaines montés sont techniques, prévoyez crash bars et tenues adéquates pour ce tracé. 
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>120 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>1 014 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1/2 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Confirmé</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="moireLe BoisdOingt.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
            <!-- Cartes 07 -->
      </article>
       <article class="rv-card"
               id="trip-07"
               data-gpx="capcorse.gpx"
               data-images="capcorse1.jpg,capcorse2.jpg,capcorse3.jpg,capcorse4.jpg,capcorse5.jpg,capcorse6.jpg,capcorse8.jpg"
               data-categories="eau"
               data-distance="150"
               data-duration="1/2"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">07</span>
          <div class="rv-card-badges">
            <img src="mer.png" class="badge-icon" alt="Mer">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="capcorse8.jpg" alt="Balade en Cap Corse">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Balade en Cap Corse</h3>
            <span class="rv-card-rating">★★★★</span>
          </div>
          <p class="rv-card-text">
           Arrivée en Terre Corse à Bastia par le ferry pris la veille à Toulon, départ au petit matin vers le cap Corse. La mer à l'horizon, les points de vues escarpés, les plages.. Que demander de plus ?
           Fin de l'itinéraire à L'île Rousse où vous pourrez en profiter pour aller piquer une tête. N'oubliez pas, en corse on compte les trajets en heure, pas en km.
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>150 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>361 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1/2 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Confirmé</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="capcorse.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>
      <!-- Cartes 08 -->
      </article>
       <article class="rv-card"
               id="trip-08"
               data-gpx="dordogneperigord.gpx"
               data-images="dordogne1.JPEG,dordogne2.JPEG,dordogne3.JPEG,dordogne4.JPEG,dordogne5.JPEG,dordogne6.JPEG"
               data-categories="eau"
               data-distance="148"
               data-duration="1/2"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">08</span>
          <div class="rv-card-badges">
            <img src="mer.png" class="badge-icon" alt="Mer">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="dordogne1.JPEG" alt="e long de le Dordogne en Perigord Noir">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Le long de le Dordogne en Perigord Noir</h3>
            <span class="rv-card-rating">★★★★</span>
          </div>
          <p class="rv-card-text">
         Sur cette itinéraire on voyage dans le temps en suivant la Dordogne. D'abord Souillac, l'entrée vers la Dordogne. On perd le fleuve de vu pour s'arrêter à Rocamadour la citée perchée. Viendront ensuite la ville de Domme et sa vue imprenable sur la Dordogne. Le village mediéval de La Roque-Gageac puis le chateau de Castelnaud qui domine les bords du cours d'eau.
            Enfin Sarlat la canédat, capitale du Périgord Noir, citée historique chargée d'histoire. Ici prenez le temps, même quelques jours, pour visiter, vous restaurer et profiter. Il y a tellement à faire !
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>148 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>384 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1/2 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Débutant</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="dordogneperigord.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>
       <!-- Cartes 09 -->
      </article>
       <article class="rv-card"
               id="trip-09"
               data-gpx="civrieux-dazergues.gpx"
               data-images="IMG_7012.JPEG,IMG_7013.JPEG,IMG_7019.JPEG"
               data-categories="foret"
               data-distance="65"
               data-duration="1/2"
               data-surface="offroad">
        <div class="rv-card-header">
          <span class="rv-card-id">09</span>
          <div class="rv-card-badges">
            <img src="forest.png" class="badge-icon" alt="Forêt">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="IMG_7019.JPEG" alt="Balade en forêt">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Balade en forêt</h3>
            <span class="rv-card-rating">★★★☆</span>
          </div>
          <p class="rv-card-text">
          Une sortie offraod assez simple sans piège et pas très technique. Pour commencer les chemins sans se faire peur !
          </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>65 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>667 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1/2 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Débutant</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="civrieux-dazergues.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>
        <!-- Cartes 10 -->
      </article>
       <article class="rv-card"
               id="trip-10"
               data-gpx="correze.gpx"
               data-images="IMG_2460.JPEG,IMG_2463.JPEG,IMG_2469.JPEG,IMG_2470.JPEG,IMG_2476.JPEG,IMG_2485.JPEG,IMG_2486.JPEG"
               data-categories="eau"
               data-distance="186"
               data-duration="1/2"
               data-surface="route">
        <div class="rv-card-header">
          <span class="rv-card-id">10</span>
          <div class="rv-card-badges">
            <img src="mer.png" class="badge-icon" alt="Mer">
          </div>
        </div>
        <div class="rv-card-media">
          <img src="IMG_2476.JPEG" alt="Villages oubliés entre Lot et Corrèze">
        </div>
        <div class="rv-card-body">
          <div class="rv-card-title-row">
            <h3 class="rv-card-title">Villages oubliés entre Lot et Corrèze</h3>
            <span class="rv-card-rating">★★★☆</span>
          </div>
          <p class="rv-card-text">
Entre le Lot et la Corrèze, on traverse ici des vallées oubliées, des chateaux esseulés et des villages inconnus.. Un arrêt inévitable est à prévoir à Collonges-la-Rouge construite en grès rouge qui lui donne sa couleur si particulière. Je vous conseille de prendre une nuit au camping le Vallons d'Estivaux. Un lieu simple et calme géré par Franck et Gwendoline. Le soir allez faire connaissance avec le reste des voyageurs autour d'une bonne bière locale ! Vous pouvez aller jusqu'à Limoges, ville de Matthieu ! Mais bon qu'on se le dise.. c'est moins bien que Clermont !  </p>
          <div class="rv-card-meta">
            <div class="rv-card-stats">
              <div class="stat"><small>Distance</small><strong>186 km</strong></div>
              <div class="stat"><small>Altitude max ↑</small><strong>482 m</strong></div>
              <div class="stat"><small>Durée</small><strong>1/2 jour</strong></div>
              <div class="stat"><small>Niveau</small><strong>Débutant</strong></div>
            </div>
          </div>
          <div class="rv-card-footer">
            <a href="correze.gpx" class="rv-card-link" target="_blank">Télécharger GPX</a>
          </div>
        </div>
      </article>
    </div>

    <!-- MODAL TRIP -->
    <div id="trip-modal" class="modal">
      <div class="modal-content">
        <span class="modal-close">&times;</span>
        <div id="map-modal"></div>
        <div id="trip-modal-card"></div>
        <div class="trip-gallery-modal">
          <h4>Galerie</h4>
          <div class="gallery-thumbs"></div>
        </div>
      </div>
    </div>

    <!-- LIGHTBOX MODAL IMAGE -->
    <div id="image-modal" class="modal">
      <div class="modal-content image-lightbox">
        <button class="lightbox-prev" aria-label="Image précédente">‹</button>
        <img id="image-modal-img" class="image-modal-img" src="" alt="Aperçu">
        <button class="lightbox-next" aria-label="Image suivante">›</button>
        <span class="modal-close">&times;</span>
      </div>
    </div>

        <!-- FOOTER -->
    <div class="footer">
      <div class="left-footer">
        <a href="home.html" style="display: flex; align-items: center; gap: 0.5rem;">
          <img src="./moulin-coeur-noir.png" alt="Logo">
          <span>Old Mill Riders</span>
        </a>
      </div>
      <div class="right-footer">
        <a href="labande.html">La Bande</a>
        <a href="LeShop.html">Le Shop</a>
        <a href="trips.html" class="active">Trips</a>
        <a href="#" id="privacy-policy-link">Politique de confidentialité</a>
        <a href="#" id="legal-mentions-link">Mentions légales</a>
      </div>
    </div>

    <!-- Modal Politique de confidentialité -->
    <div id="privacy-modal" class="modal">
      <div class="modal-content">
        <span class="modal-close">&times;</span>
        <h2>Politique de confidentialité</h2>
        <p>La présente Politique de confidentialité régit la collecte, l’usage et la protection de vos données personnelles par Old Mill Riders (« nous »). Elle s’applique lorsque vous remplissez notre formulaire de pré-commande.</p>
        <h3>1. Responsable de traitement</h3>
        <p>
          Old Mill Riders<br>
          62 avenue Debourg, 69007 Lyon<br>
          Email : <a href="mailto:team@oldmillriders.fr">team@oldmillriders.fr</a>
        </p>
        <h3>2. Données collectées</h3>
        <ul>
          <li>Prénom, Nom</li>
          <li>Adresse e-mail</li>
          <li>Adresse postale</li>
          <li>Intérêt du produit</li>
          <li>Taille du produit</li>
          <li>Moyen de paiement</li>
        </ul>
        <h3>3. Finalités du traitement</h3>
        <ul>
          <li>Gérer et suivre votre pré-commande</li>
          <li>Vous informer sur la préparation, le paiement, l’expédition et le suivi</li>
          <li>Répondre à vos questions via le service client</li>
        </ul>
        <h3>4. Base légale</h3>
        <p>Votre <strong>consentement</strong> (article 6.1.a du RGPD), exprimé en soumettant le formulaire.</p>
        <h3>5. Destinataires</h3>
        <ul>
          <li>Services internes (commandes, service client)</li>
          <li>Prestataires logistiques</li>
          <li>Hébergeur (Google Forms)</li>
        </ul>
        <h3>6. Durée de conservation</h3>
        <p>Conservation pendant la gestion de votre commande, puis archivage 3 ans.</p>
        <h3>7. Vos droits</h3>
        <ul>
          <li>Accès, rectification, effacement, limitation, opposition, portabilité, retrait du consentement</li>
        </ul>
        <p>Pour exercer vos droits : <a href="mailto:team@oldmillriders.fr">team@oldmillriders.fr</a> ou CNIL (www.cnil.fr).</p>
        <h3>8. Sécurité</h3>
        <p>Mesures techniques et organisationnelles pour protéger vos données.</p>
        <h3>9. Cookies</h3>
        <p>Cookies strictement nécessaires au fonctionnement du site. Gérés via votre navigateur.</p>
        <h3>10. Mise à jour</h3>
        <p>Date de dernière mise à jour : 23 avril 2025.</p>
      </div>
    </div>

  </div>

    <!-- Modal Mentions légales -->
    <div id="legal-modal" class="modal">
      <div class="modal-content">
        <span class="modal-close">&times;</span>
        <h2>Mentions légales</h2>
        <ul>
          <li><strong>Éditeur :</strong> Old Mill Riders – Lyon </li>
          <li><strong>Identité : </strong> Roméo SIVER, 62 avenue Debourg, 69007 Lyon, France</li>
          <li><strong>Directeur de la publication :</strong> Roméo Siver <a href="mailto:team@oldmillriders.fr">team@oldmillrider.fr</a></li>
          <li><strong>Hébergeur :</strong> OVH – 2 rue Kellermann, 59100 Roubaix </li>
        </ul>
      </div>
    </div>

  </div>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // —————————————————————————
  // 1) MODALS & MENU BURGER
  // —————————————————————————
  function openModal(modal) {
    document.body.style.overflow = 'hidden';
    modal.style.display = 'flex';
  }
  function closeModal(modal) {
    document.body.style.overflow = '';
    const vid = modal.querySelector('video');
    if (vid) vid.pause();
    modal.style.display = 'none';
  }
  document.getElementById('privacy-policy-link')
    .addEventListener('click', e => {
      e.preventDefault();
      openModal(document.getElementById('privacy-modal'));
    });
  document.getElementById('legal-mentions-link')
    .addEventListener('click', e => {
      e.preventDefault();
      openModal(document.getElementById('legal-modal'));
    });
  document.querySelectorAll('.modal-close').forEach(btn =>
    btn.addEventListener('click', () =>
      closeModal(btn.closest('.modal'))
    )
  );
  document.querySelectorAll('.modal').forEach(modal =>
    modal.addEventListener('click', e => {
      if (e.target === modal) closeModal(modal);
    })
  );
  document.querySelector('.menu-toggle')
    .addEventListener('click', () =>
      document.querySelector('header nav').classList.toggle('open')
    );

  // —————————————————————————
  // 2) CARTE & GPX
  // —————————————————————————
  let mapInit = false, map, gpxLayer;
  document.querySelectorAll('.rv-card').forEach(card => {
    card.addEventListener('click', () => {
      openModal(document.getElementById('trip-modal'));

      // Cloner la carte (sans image)
      const container = document.getElementById('trip-modal-card');
      container.innerHTML = '';
      const clone = card.cloneNode(true);
      clone.removeAttribute('id');
      clone.style.width = '100%';
      const media = clone.querySelector('.rv-card-media');
      if (media) media.remove();
      container.appendChild(clone);

      // Init map (une seule fois)
      if (!mapInit) {
        map = L.map('map-modal').setView([45.3639,5.83],10);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '© OpenStreetMap contributors'
        }).addTo(map);
        mapInit = true;
      }
      // Charger GPX
      const gpxFile = card.dataset.gpx;
      if (gpxLayer) map.removeLayer(gpxLayer);
      gpxLayer = new L.GPX(gpxFile, {
        async: true,
        marker_options: { startIconUrl: null, endIconUrl: null },
        polyline_options: { color: '#0077cc', weight: 4, opacity: 0.8 }
      })
      .on('loaded', e => map.fitBounds(e.target.getBounds()))
      .addTo(map);

      // Construire la galerie
      const thumbsContainer = document.querySelector('#trip-modal .gallery-thumbs');
      thumbsContainer.innerHTML = '';
      card.dataset.images.split(',').forEach((src,i) => {
        const item = src.trim();
        if (item.startsWith('video:')) {
          const videoSrc = item.replace(/^video:/, '');
          const video = document.createElement('video');
          video.src          = videoSrc;
          video.poster       = videoSrc.replace('.mp4', '.jpg');
          video.className    = 'thumb-video';
          video.muted        = true;
          video.playsInline  = true;
          video.preload      = 'metadata';
          video.controls     = false;
          video.style.objectFit = 'cover';
          video.style.cursor    = 'pointer';
          video.oncontextmenu   = e => e.preventDefault();
          thumbsContainer.appendChild(video);
        } else {
          const img = document.createElement('img');
          img.src = item;
          img.alt = `Photo ${i+1}`;
          thumbsContainer.appendChild(img);
        }
      });

      // (Re)initialise la lightbox
      setupLightbox();
    });
  });

  // —————————————————————————
  // 3) LIGHTBOX
  // —————————————————————————
  function setupLightbox() {
    const thumbs       = Array.from(document.querySelectorAll('#trip-modal .gallery-thumbs > *'));
    const imageModal   = document.getElementById('image-modal');
    const bodyLightbox = imageModal.querySelector('.modal-content');
    const prevBtn      = bodyLightbox.querySelector('.lightbox-prev');
    const nextBtn      = bodyLightbox.querySelector('.lightbox-next');
    let idx = 0;

    thumbs.forEach((thumb, i) => {
      thumb.onclick = () => {
        idx = i;
        const existing = bodyLightbox.querySelector('img, video');
        if (existing) existing.remove();

        if (thumb.tagName === 'IMG') {
          const img = document.createElement('img');
          img.src       = thumb.src;
          img.className = 'image-modal-img';
          bodyLightbox.insertBefore(img, prevBtn);
        } else {
          const vid = document.createElement('video');
          vid.src       = thumb.src;
          vid.controls  = true;
          vid.autoplay  = true;
          vid.className = 'image-modal-img';
          bodyLightbox.insertBefore(vid, prevBtn);
        }
        openModal(imageModal);
      };
    });

    prevBtn.onclick = e => {
      e.stopPropagation();
      idx = (idx - 1 + thumbs.length) % thumbs.length;
      thumbs[idx].click();
    };
    nextBtn.onclick = e => {
      e.stopPropagation();
      idx = (idx + 1) % thumbs.length;
      thumbs[idx].click();
    };

    // Swipe & bloquer scroll fond
    let startX = 0;
    imageModal.addEventListener('touchstart', e => {
      startX = e.changedTouches[0].screenX;
    }, { passive: false });
    imageModal.addEventListener('touchmove', e => {
      e.stopPropagation();
    }, { passive: false });
    imageModal.addEventListener('touchend', e => {
      const endX = e.changedTouches[0].screenX;
      const diff = endX - startX;
      if (Math.abs(diff) > 50) {
        diff < 0 ? nextBtn.click() : prevBtn.click();
      }
    });
  }

  // —————————————————————————
  // 4) FILTRES CHIPS (avec filtre "surface")
  // —————————————————————————
  const chips = document.querySelectorAll('.filters-chips .chip');
  const cards = document.querySelectorAll('.rv-card');
  const activeFilters = {
    category: new Set(),
    distance: new Set(),
    duration: new Set(),
    surface:  new Set()    // ← pris en charge
  };

  function toggleChip(e) {
    e.preventDefault(); // supprime le ghost-click sur mobile
    const chip  = e.currentTarget;
    const type  = chip.dataset.filterType;
    const value = chip.dataset.value;
    if (chip.classList.toggle('selected')) {
      activeFilters[type].add(value);
    } else {
      activeFilters[type].delete(value);
    }
    applyFilters();
  }

  chips.forEach(chip => {
    chip.addEventListener('click',    toggleChip);
    chip.addEventListener('touchend', toggleChip);
  });

  function applyFilters() {
    cards.forEach(card => {
      const cats = card.dataset.categories
                    .split(',')
                    .map(s => s.trim().toLowerCase());
      const dist = parseFloat(card.dataset.distance);
      const dur  = parseFloat(card.dataset.duration);
      const surf = (card.dataset.surface || '')
                    .split(',')
                    .map(s => s.trim().toLowerCase());
      let show = true;

      // catégorie
      if (activeFilters.category.size) {
        show = [...activeFilters.category].some(v => cats.includes(v));
      }
      // distance
      if (show && activeFilters.distance.size) {
        show = [...activeFilters.distance].some(r => {
          if (r === '300+') return dist > 300;
          const [min, max] = r.split('-').map(Number);
          return dist >= min && dist <= max;
        });
      }
      // durée
      if (show && activeFilters.duration.size) {
        show = [...activeFilters.duration].some(v => {
          if (v === '2+') return dur >= 2;
          return dur === parseFloat(v);
        });
      }
      // surface
      if (show && activeFilters.surface.size) {
        show = [...activeFilters.surface].some(v => surf.includes(v));
      }

      card.style.display = show ? '' : 'none';
    });
  }
    // —————————————————————————
  // 5) TOGGLE FILTRES REPLIABLES
  // —————————————————————————
  const toggleBtn = document.getElementById('filters-toggle');
  const filtersWr = document.querySelector('.filters-wrapper');
  toggleBtn.addEventListener('click', () => {
    filtersWr.classList.toggle('open');
  });

});
</script>
</body>
</html>
